# Data Schemas

This section summarizes the key data artifacts and their expected structure. These are derived from code paths in extraction and reporting workflows.

## Transcript JSON

Transcripts are stored as JSON objects with top-level metadata and a `transcription` payload. A typical structure includes:

- `filename`: original audio filename.
- `date_of_call`: call date in `YYYY-MM-DD` format.
- `metadata`: call metadata (agent ID, call type, etc.).
- `transcription`: the transcript object, including a `transcript` field and optional speaker/timestamp metadata.

## Extraction output JSON (agent scorecard)

After `novus extract`, each transcript produces a JSON file with:

- Original transcript and metadata.
- Per-feature outputs stored as:
  - `<feature>_pred`
  - `<feature>_pred_details`
  - `<feature>_pred_question`
  - `<feature>_pred_system_prompt`
  - `<feature>_pred_user_prompt`
  - `<feature>_pred_prompt_tokens`
  - `<feature>_pred_completion_tokens`
  - `<feature>_pred_total_cost`

These files are aggregated into `feature_wide_table.xlsx`.

## Feature-wide table

Created by `create_feature_wide_table` in `novus extract`.

Columns typically include:

- `filename`
- `transcript`
- Metadata fields from the transcript JSON
- Per-feature columns listed above (`*_pred`, `*_pred_details`, etc.)

This table is the input to the reporting layer.

## VOC raw outputs

VOC extraction writes raw outputs per step into the configured `raw_features_path`. Each file contains:

- Step name and structured outputs.
- LLM response metadata (prompt, token usage, costs).

## VOC combined table

The combined VOC table is generated by the VOC table combiner using:

- `field_mappings.yml`
- `aggregation_rules.yml`
- `final_columns.yml`

The final table is one row per call and includes derived columns such as `call_year` and `call_month`.
